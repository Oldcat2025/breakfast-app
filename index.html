<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>厨神榜 - 早餐打卡</title>
    <style>
        /* --- 全局样式设定 --- */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f5f7; /* 莫兰迪色系：淡灰背景 */
            color: #333;
        }

        h1 {
            text-align: center;
            color: #4a4a4a;
            margin-bottom: 30px;
            font-weight: 300;
        }

        /* --- 1. 角色选择区域 (大气简笔画无文字版) --- */
        .role-selector {
            display: flex;
            justify-content: center;
            gap: 25px; /* 图标之间的间距 */
            margin-bottom: 30px;
        }

        .role-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        /* SVG 图标通用样式 */
        .role-icon-svg {
            width: 65px;
            height: 65px;
            fill: none;
            stroke: #8c8c8c; /* 默认状态：莫兰迪深灰 */
            stroke-width: 1.5;
            stroke-linecap: round;
            stroke-linejoin: round;
            background: #e0e0e0; /* 默认背景：浅灰 */
            border-radius: 50%;
            padding: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }

        /* 选中状态 */
        .role-card.active .role-icon-svg {
            stroke: #fff; /* 线条变白 */
            background: #D4AF37; /* 背景变香槟金，大气 */
            box-shadow: 0 8px 15px rgba(212, 175, 55, 0.4);
            transform: scale(1.1); /* 稍微放大 */
        }

        /* 选中时的指示小圆点 */
        .role-card::after {
            content: '';
            display: block;
            width: 6px;
            height: 6px;
            background: transparent;
            border-radius: 50%;
            margin-top: 10px;
            transition: background 0.3s;
        }
        .role-card.active::after {
            background: #D4AF37;
        }

        /* --- 2. 拍照上传按钮 (长文字适配版) --- */
        .upload-container {
            text-align: center;
            margin-bottom: 40px;
        }

        .upload-btn {
            background: linear-gradient(135deg, #E6B980 0%, #EACDA3 100%); /* 金色渐变 */
            color: #5d4037;
            border: none;
            padding: 15px 20px;
            border-radius: 50px; /* 胶囊形状 */
            font-size: 15px;
            font-weight: bold;
            width: 90%;
            max-width: 400px;
            box-shadow: 0 4px 15px rgba(230, 185, 128, 0.3);
            cursor: pointer;
            transition: transform 0.1s;
            /* 确保文字不换行，如果屏幕太小自动缩小字体 */
            white-space: normal; 
            line-height: 1.4;
        }

        .upload-btn:active {
            transform: scale(0.98);
        }

        /* --- 3. 菜谱列表与深色底图 --- */
        .recipe-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); /* 自动排列卡片 */
            gap: 15px;
        }

        .recipe-card {
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            transition: transform 0.2s;
        }

        .recipe-card:hover {
            transform: translateY(-3px);
        }

        /* 图片容器 */
        .img-wrapper {
            width: 100%;
            height: 120px;
            background-color: #f0f0f0;
            position: relative;
        }

        .recipe-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* === 关键修改：深色通用占位图 === */
        .recipe-img-placeholder {
            width: 100%;
            height: 100%;
            background-color: #2c2c2c; /* 深色背景，不刺眼 */
            display: flex; /* 默认隐藏，JS控制显示 */
            align-items: center;
            justify-content: center;
        }

        .placeholder-icon {
            opacity: 0.5; /* 图标半透明 */
        }

        .recipe-info {
            padding: 10px;
        }

        .recipe-title {
            font-size: 14px;
            margin: 0 0 5px 0;
            color: #333;
        }

        .recipe-author {
            font-size: 12px;
            color: #999;
        }

    </style>
</head>
<body>

    <h1>☀️ 早餐打卡</h1>

    <div class="role-selector">
        <div class="role-card" onclick="selectRole('dad', this)">
            <svg class="role-icon-svg" viewBox="0 0 24 24">
                <path d="M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a5 5 0 0 1-5-5 5 5 0 0 1 10 0 5 5 0 0 1-5 5z"/> <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/> </svg>
        </div>

        <div class="role-card" onclick="selectRole('mom', this)">
            <svg class="role-icon-svg" viewBox="0 0 24 24">
                <path d="M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a5 5 0 0 1-5-5 5 5 0 0 1 10 0 5 5 0 0 1-5 5z"/> <path d="M16 7.5C16 10.5 13.5 12 12 12s-4-1.5-4-4.5" opacity="0.4"/> <path d="M20 21v-2a4 4 0 0 0-3-3.87"/> <path d="M4 21v-2a4 4 0 0 1 3-3.87"/> <path d="M9 14h6v7H9z"/> <path d="M9 14l-1-2h8l-1 2"/> </svg>
        </div>

        <div class="role-card" onclick="selectRole('kid', this)">
            <svg class="role-icon-svg" viewBox="0 0 24 24">
                <circle cx="12" cy="8" r="4"/> <path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/> <path d="M8 6h8a4 4 0 0 1 0 8"/> <path d="M8 6a4 4 0 0 1 8 0"/> </svg>
        </div>
    </div>

    <div class="upload-container">
        <input type="file" id="cameraInput" accept="image/*" capture="camera" style="display: none;" onchange="handleFileSelect(event)">
        
        <button class="upload-btn" onclick="triggerCamera()">
            请先选角色再拍照上传你做的早餐效果照片
        </button>
    </div>

    <div class="recipe-list" id="gallery">
        <div class="recipe-card">
            <div class="img-wrapper">
                <img src="error.jpg" class="recipe-img" style="display:none;" onerror="showPlaceholder(this)">
                <div class="recipe-img-placeholder">
                    <svg class="placeholder-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
                        <path d="M12 2a9 9 0 0 1 9 9v1a2 2 0 0 1-2 2h-14a2 2 0 0 1-2-2v-1a9 9 0 0 1 9-9z"/>
                        <path d="M12 22a4 4 0 0 0 4-4h-8a4 4 0 0 0 4 4z"/>
                    </svg>
                </div>
            </div>
            <div class="recipe-info">
                <h3 class="recipe-title">待上传早餐</h3>
                <span class="recipe-author">示例卡片</span>
            </div>
        </div>
    </div>

    <script>
        let currentRole = null;

        // 1. 角色选择逻辑
        function selectRole(role, element) {
            currentRole = role;
            
            // 移除所有选中状态
            document.querySelectorAll('.role-card').forEach(el => {
                el.classList.remove('active');
            });
            
            // 添加当前选中状态
            element.classList.add('active');
            
            // 提示用户 (可选)
            // alert('已选择角色: ' + role); 
        }

        // 2. 触发拍照逻辑
        function triggerCamera() {
            if (!currentRole) {
                alert("请先选择上面的角色头像！");
                return;
            }
            // 触发隐藏的文件输入框
            document.getElementById('cameraInput').click();
        }

        // 3. 处理文件选择并显示
        function handleFileSelect(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    addNewCard(e.target.result);
                };
                reader.readAsDataURL(file);
            }
        }

        // 4. 添加新卡片到页面
        function addNewCard(imgSrc) {
            const gallery = document.getElementById('gallery');
            const roleName = currentRole === 'dad' ? '爸爸' : (currentRole === 'mom' ? '妈妈' : '宝贝');
            
            const cardHTML = `
                <div class="recipe-card">
                    <div class="img-wrapper">
                        <img src="${imgSrc}" class="recipe-img" onerror="showPlaceholder(this)">
                        <div class="recipe-img-placeholder" style="display:none;">
                            <svg class="placeholder-icon" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#666" stroke-width="1.5">
                                <path d="M12 2a9 9 0 0 1 9 9v1a2 2 0 0 1-2 2h-14a2 2 0 0 1-2-2v-1a9 9 0 0 1 9-9z"/>
                                <path d="M12 22a4 4 0 0 0 4-4h-8a4 4 0 0 0 4 4z"/>
                            </svg>
                        </div>
                    </div>
                    <div class="recipe-info">
                        <h3 class="recipe-title">今日早餐打卡</h3>
                        <span class="recipe-author">${roleName} 的作品</span>
                    </div>
                </div>
            `;
            
            // 插入到最前面
            gallery.insertAdjacentHTML('afterbegin', cardHTML);
        }

        // 5. 图片加载失败时显示深色占位图
        function showPlaceholder(imgElement) {
            imgElement.style.display = 'none'; // 隐藏破图
            imgElement.nextElementSibling.style.display = 'flex'; // 显示深色背景
        }
    </script>
</body>
</html>
